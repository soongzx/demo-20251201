# FreeBoard 系统需求规格说明书

## 1. 项目概述

### 1.1 项目背景
FreeBoard 是一款基于 Vue 3 的在线白板应用，提供简洁的绘图和文字编辑功能，支持多标签页管理和主题切换，旨在为用户提供便捷的在线协作和创意表达工具。

### 1.2 项目目标
- 提供直观易用的白板绘图功能
- 支持多标签页管理，实现多任务并行处理
- 实现深色/浅色主题切换，提升用户体验
- 自动保存用户操作，防止数据丢失
- 提供安全的用户认证机制

### 1.3 术语定义
- **白板（Blackboard）**：用户进行绘图和文字编辑的画布
- **标签页（Tab）**：用于组织和切换不同白板的界面元素
- **绘图工具（Tool）**：用于在白板上绘制不同类型内容的工具
- **主题（Theme）**：应用的视觉风格，包括深色和浅色两种模式

## 2. 功能需求

### 2.1 用户认证
- **登录功能**：用户通过用户名和密码登录系统
- **退出登录**：用户可以安全退出当前账户

### 2.2 标签页管理
- **创建标签页**：用户可以添加新的标签页，最多支持 8 个标签页
- **切换标签页**：用户可以在不同标签页之间切换
- **关闭标签页**：用户可以关闭不需要的标签页

### 2.3 白板功能
- **绘图工具**：
  - 线条工具：绘制不同颜色和粗细的线条
  - 文字工具：在指定位置添加文字内容
- **清除功能**：一键清空当前白板内容
- **颜色选择**：支持自定义绘图颜色
- **线条粗细调整**：支持调整线条宽度（1-10px）

### 2.4 主题管理
- **主题切换**：支持在深色主题和浅色主题之间切换
- **主题持久化**：系统自动保存用户的主题偏好

### 2.5 数据管理
- **自动保存**：系统每 5 秒自动保存白板内容
- **数据持久化**：使用 Vercel KV 存储用户数据

## 3. 非功能需求

### 3.1 性能需求
- **响应时间**：页面加载时间不超过 2 秒
- **交互响应**：用户操作响应时间不超过 500ms
- **并发支持**：支持单用户多标签页操作

### 3.2 安全需求
- **用户认证**：基于用户名和密码的身份验证
- **数据传输**：使用 HTTPS 协议保障数据传输安全
- **数据存储**：敏感数据加密存储

### 3.3 可用性需求
- **界面友好**：直观易用的用户界面，符合现代设计规范
- **错误处理**：提供清晰的错误提示信息
- **帮助文档**：提供简洁的使用说明

### 3.4 可维护性需求
- **代码规范**：遵循 Vue 3 代码规范和 TypeScript 最佳实践
- **模块化设计**：组件化开发，提高代码复用性
- **文档完备**：关键代码和功能模块配有详细注释

## 4. 技术架构

### 4.1 前端技术栈
- **框架**：Vue 3（Composition API）
- **构建工具**：Vite
- **语言**：TypeScript
- **状态管理**：Pinia
- **路由**：Vue Router
- **UI组件库**：Element Plus
- **样式**：SCSS
- **HTTP客户端**：Axios

### 4.2 后端技术栈
- **数据存储**：Vercel KV

### 4.3 架构设计
- **组件化设计**：将应用拆分为多个独立的功能组件
- **状态集中管理**：使用 Pinia 管理全局状态
- **路由导航**：使用 Vue Router 实现页面间导航
- **数据持久化**：通过 Vercel KV 服务存储用户数据

## 5. 数据结构

### 5.1 核心数据类型

#### 5.1.1 标签页（Tab）
```typescript
interface Tab {
  id: string;        // 标签页唯一标识
  title: string;     // 标签页标题
  content: string;   // 标签页内容
}
```

#### 5.1.2 白板（Blackboard）
```typescript
interface Blackboard {
  id: string;                    // 白板唯一标识
  title: string;                 // 白板标题
  items: BlackboardItem[];       // 白板上的元素列表
}
```

#### 5.1.3 白板元素（BlackboardItem）
```typescript
interface BlackboardItem {
  id: string;                    // 元素唯一标识
  type: 'line' | 'text';         // 元素类型
  position: { x: number; y: number }; // 元素位置
  content: any;                  // 元素内容，根据类型不同而不同
}
```

#### 5.1.4 线条元素内容
```typescript
interface LineContent {
  endX: number;                  // 线条终点X坐标
  endY: number;                  // 线条终点Y坐标
  color: string;                 // 线条颜色
  lineWidth: number;             // 线条宽度
}
```

#### 5.1.5 文字元素内容
```typescript
interface TextContent {
  text: string;                  // 文字内容
  color: string;                 // 文字颜色
  fontSize: number;              // 文字大小
}
```

## 6. 界面设计

### 6.1 登录界面
- **布局**：居中布局，包含应用标题和登录表单
- **元素**：用户名输入框、密码输入框、登录按钮

### 6.2 主界面
- **顶部导航栏**：应用标题、主题切换按钮、退出登录按钮
- **标签页区域**：标签页列表、添加标签页按钮
- **白板区域**：绘图工具栏、画布、文字输入框

### 6.3 工具栏
- **工具按钮**：文字工具、线条工具、清空按钮
- **颜色选择器**：自定义绘图颜色
- **线条粗细滑块**：调整线条宽度

## 7. 系统配置

### 7.1 配置参数
- **最大标签页数**：8个
- **自动保存间隔**：5000毫秒
- **默认主题**：浅色主题
- **默认用户名**：admin
- **默认密码**：password

### 7.2 环境变量
- **VITE_API_BASE_URL**：API 基础 URL
- **KV_URL**：Vercel KV 连接 URL
- **KV_REST_API_URL**：Vercel KV REST API URL
- **KV_REST_API_TOKEN**：Vercel KV REST API 令牌
- **KV_REST_API_READ_ONLY_TOKEN**：Vercel KV REST API 只读令牌

## 8. 测试需求

### 8.1 功能测试
- 登录功能测试
- 标签页管理测试
- 白板绘图功能测试
- 主题切换测试
- 自动保存测试

### 8.2 性能测试
- 页面加载性能测试
- 绘图操作响应测试
- 多标签页切换测试

### 8.3 兼容性测试
- 主流浏览器兼容性测试（Chrome、Firefox、Safari、Edge）
- 不同设备兼容性测试（桌面端、平板端）

## 9. 使用说明

### 9.1 登录系统
1. 打开应用，进入登录界面
2. 输入用户名和密码
3. 点击登录按钮

### 9.2 管理标签页
1. 点击右上角的「+」按钮添加新标签页
2. 点击标签页切换不同的白板
3. 点击标签页上的关闭按钮删除标签页

### 9.3 使用绘图工具
1. 在工具栏选择需要的绘图工具（文字或线条）
2. 选择绘图颜色和线条粗细
3. 在画布上进行绘图操作
   - 线条工具：按住鼠标左键拖动绘制线条
   - 文字工具：点击画布指定位置，输入文字内容

### 9.4 切换主题
1. 点击右上角的主题切换按钮
2. 在深色主题和浅色主题之间切换

### 9.5 退出系统
1. 点击右上角的「退出登录」按钮
2. 系统自动退出到登录界面

## 10. 开发与部署

### 10.1 开发环境搭建
1. 安装 Node.js 16+ 和 npm
2. 克隆项目代码
3. 安装依赖：`npm install`
4. 启动开发服务器：`npm run dev`

### 10.2 生产环境部署
1. 构建生产版本：`npm run build`
2. 部署构建产物到服务器
3. 配置环境变量
4. 启动服务

## 11. 维护与升级

### 11.1 版本管理
- 使用语义化版本号（MAJOR.MINOR.PATCH）
- 定期发布新版本，修复 bug 和添加新功能

### 11.2 日志管理
- 记录系统运行日志
- 记录用户操作日志
- 定期分析日志，优化系统性能

### 11.3 系统监控
- 监控系统运行状态
- 监控用户访问情况
- 及时发现和解决系统问题

## 12. 附录

### 12.1 项目文件结构
```
├── public/              # 静态资源
├── src/
│   ├── assets/         # 项目资源文件
│   ├── components/     # 公共组件
│   ├── composables/    # 可复用的组合式函数
│   ├── layouts/        # 页面布局
│   ├── main.ts         # 入口文件
│   ├── router/         # 路由配置
│   ├── services/       # API 服务
│   ├── stores/         # Pinia 状态管理
│   ├── style.css       # 全局样式
│   ├── types/          # TypeScript 类型定义
│   ├── utils/          # 工具函数
│   ├── views/          # 页面组件
│   └── App.vue         # 根组件
├── .gitignore          # Git 忽略配置
├── LICENSE             # 许可证文件
├── README.md           # 项目说明文档
├── index.html          # HTML 入口文件
├── package-lock.json   # 依赖锁定文件
├── package.json        # 项目配置文件
├── tsconfig.app.json   # TypeScript 应用配置
├── tsconfig.json       # TypeScript 基础配置
├── tsconfig.node.json  # TypeScript Node 配置
└── vite.config.ts      # Vite 配置文件
```

### 12.2 关键模块说明

#### 12.2.1 登录模块
- **文件位置**：`src/views/LoginView.vue`
- **功能**：处理用户登录逻辑
- **依赖**：Vue Router、Pinia

#### 12.2.2 主界面模块
- **文件位置**：`src/views/MainView.vue`
- **功能**：管理标签页和主题切换
- **依赖**：Vue Router、Pinia、Element Plus

#### 12.2.3 白板组件
- **文件位置**：`src/components/BlackboardComponent.vue`
- **功能**：提供绘图和文字编辑功能
- **依赖**：Element Plus、Canvas API

#### 12.2.4 状态管理
- **文件位置**：`src/stores/app.ts`
- **功能**：管理应用全局状态
- **依赖**：Pinia、Vercel KV

#### 12.2.5 数据服务
- **文件位置**：`src/services/kv.ts`
- **功能**：提供数据存储和读取服务
- **依赖**：Vercel KV

### 12.3 开发规范
- 遵循 Vue 3 代码规范
- 使用 TypeScript 进行类型检查
- 组件化开发，提高代码复用性
- 采用 SCSS 进行样式管理
- 定期提交代码，使用 Git 进行版本控制

---

**文档版本**：1.0
**文档日期**：2023-12-01
**编写人员**：AI 助手
**审核人员**：待定